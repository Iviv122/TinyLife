<html>
  <body style="background-color: black; overflow-y: hidden; overflow-x: hidden">
    <p id="field"></p>
    <script>
      const width = window.innerWidth;
      const height = window.innerHeight;

      const mf = (n) => Math.floor(n);

      const gridWidth = mf(width / (10 * 0.6));
      const gridHeight = mf(height / 10);
      const field = document.querySelector("#field");
      const fieldC = " @";
      const fs = field.style;

      fs.color = "white";
      fs.fontSize = `10px`;
      fs.lineHeight = "1";

      var matrix = Array.from({ length: gridHeight * gridWidth }, (_, i) =>
        Math.random() > 0.9 ? 1 : 0
      );
      field.innerHTML = "click somewhere =)";

      function place(x,y){
        matrix[gridWidth*y+x]
      }
      document.addEventListener("mousedown",

      )

      function updateEverything() {
        var fieldS = "\n";
        matrix.forEach((n, i) => {
          fieldS += fieldC[matrix[i]];
          if ((i + 1) % gridWidth === 0) {
            fieldS += "\n";
          }
        });
        field.innerHTML = `<pre>${fieldS}</pre>`;

        const nSum = (x, y) => {
          let sum = 0;
          for (let i = -1; i <= 1; i++) {
            for (let j = -1; j <= 1; j++) {
              if (i === 0 && j === 0) continue;
              const nx = x + i;
              const ny = y + j;
              if (nx >= 0 && nx < gridWidth && ny >= 0 && ny < gridHeight) {
                sum += matrix[gridWidth * ny + nx];
              }
            }
          }
          return sum;
        };
        const newMatrix = matrix.slice();
        for (let y = 0; y < gridHeight; y++) {
          for (let x = 0; x < gridWidth; x++) {
            let cell = nSum(x, y);
            const idx = gridWidth * y + x;
            if (matrix[idx] === 1) {
              newMatrix[idx] = cell === 2 || cell === 3 ? 1 : 0;
            } else {
              newMatrix[idx] = cell === 3 ? 1 : 0;
            }
          }
        }

        matrix = newMatrix;
        setTimeout(updateEverything, 100);
      }
      updateEverything();
    </script>
  </body>
</html>
